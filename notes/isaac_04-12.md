### Generating all valid 3-clusterings of MUL2x2

I wrote a script yesterday (that is still running) which iterates through all 3-partitions of $\{0,...,15\}$ and checks each one to see if it's a valid 3-cluster using sgn-criterion. It uses an implementation of algorithm_u (got it from stack exchange written in Python 2) found in Knuth to generate all k-partitions of a set, and then it manually checks all of those to see if they're valid 3-clusterings using sgn-criterion. I checked the 2-partitions already, none are valid for either qvec or sgn criterion.

There are $2^{16} = 65,536$ possible auxiliary arrays for the MUL2x2 circuit. Half of those are feasible, making $32,768$ different possible feasible auxiliary arrays (note that there are 32,767 different 2-partitions of $\{0,...,15\}$, but this doesn't mean anything -- there is a 2 to 1 correspondence between feasible auxiliary arrays and 2-clusterings once you remove the auxliary arrays consisting of all -1 or all 1).  There are 7,141,686 different partitions of a 16-element set into 3 nonempty subsets. For there to exist some kind of correspondence between these clusterings and feasible auxiliary arrays, we would need $5$ in every $1000$ 3-clusterings to be a valid 3-clustering. I'm looking at the code chugging through the 3-partitions now, and this seems potentially reasonable. I can count the number of viable clusters tomorrow when the code finishes executing.

### Justifications for clustering in the first place

Think about auxiliary spins in the following way. A choice of auxiliary states at each input is equivalent to defining a function
$$
\sigma: S^N \to S^A
$$
where $N \subseteq G$ is the set of input nodes in our graph. In this framework, the collection
$$
\left\{\sigma^{-1}(\alpha)\right\}_{\alpha\in S^A}
$$
is a partition of $S^N$ where the input spins in each set of the partition have matching choices of auxiliary states. In the MUL2x2 case, the partition associated to $\sigma$ is the collection
$$
\Big\{\sigma^{-1}(S^N\times \{-1\}), ~ \sigma^{-1}(S^N\times \{1\})\Big\}.
$$
This is a 2-partition of $S^N$. I wonder if we can find a clustering algorithm which both produces a clustering algorithm and has a reasonable run time?

In any case, we haven't found such an algorithm yet. We have found one that can (sometimes) produce 3-clusterings. In the framework above, this suggests that it could correspond to a map
$$
\sigma:S^N\to S^N \times S^{[2]},
$$
i.e. perhaps if we arbitrarily assign an auxiliary array to each input within a cluster generated by our algorithm (TopDown_BuggedSgn for instance) then we would end up with a valid auxiliary array in the regime where we add *two* auxiliary spins rather than just one. Note that this would also work with 4-clusterings. I wonder if it works?

### Questions

1. Say I have a group of spins $C \subset S^N$ which are simultaneously satisfied by either sgn or qvec. Can I guarantee that there exists an auxiliary state $\alpha \in S^A$ such that if I choose this as the auxiliary state for all $s \in C$, sgn or qvec still satisfies $C$? If so, then I could rerun the clustering and see if the size has decreased. I have this gut feeling that sgn has more desireable properties, even though qvec seems like a more robust choice, so maybe it works for sgn.
2. Does question (1) work for *any* choice of $\alpha \in S^N$?
3. Does there exist a clustering algorithm for MUL2x2 which both (A) produces 2-clusterings and (B) has a reasonable runtime?